language: node_js
node_js:
- stable
cache:
  directories:
  - node_modules
services:
- postgresql
env:
  global:
  - NODE_ENV=test
addons:
  code_climate:
    repo_token: 
      secure: "nil41MprqdkMKtai/ka3umEEs+BOfthFRPY8qJhTWB248ZIRqHpykLO92FlO+MARAZ10s+yI6ugeqkOcIkMNy0vI2GK/ZYvxCeLvXdPWS3a3eutfCucNbN/jmUnzMQER78EEzYQMdbe6d2nJm0V5eTUUXb3S7JSx83vmOqP4dPPU86w9KJaUxgPUry/j7Xt2Meoqu5vksfBJnfFnfniA8PIGTXqJpgQ72haCg/2gJnMRFVsGiua/XFmoZD44FzfNET1HZH7l6wqgrAa6WcGWW1oesQni4VrwInGc58MMdb15swgqXvPn/yR5dtj/wm9YYqbYxS7q0p4mM0hx1jyZFTY2cfXGOix1t3WVexuED4FJ6rYpftwYMk5bOpLoaRnIWO56ZtQbcV2m3cRzos9tkFCnUwgk24MERWqaYAqyYXrjifkyecGfpyHX6efJISxFR3vArCCMsUNfPgcjOb4DxGhjrmlKqo+xO6lf8M5T63PexraeX0LJ66QhzdHUwYKcgmNbhy0EEe/GNH0MT/JOldps83pwGQdLiMx+45u0bsqouuUue7vhVWk3KuSt37asIJe8LvQOGrKT2NlLeOHG3xswBv8TvmQRtgz9BfDTLH7hGtiS8c6QympWtl24INufoSlhInscN5gHN2477kmiDQlRDmcL7xZzp2Pf7jenYSw="
script:
- npm test
before_script:
- npm install codeclimate-test-reporter nyc -g
after_script:
- npm run coverage
- codeclimate-test-reporter < ./coverage/lcov.info
